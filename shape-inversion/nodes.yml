# defining controller and properties here. 
# Could be done using python based on content of file like we did previously if we prefer

# This is the controller. It is a s223:Function with the specified inputs and outputs
vav-cooling-only-active-air-flow:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    @prefix c2s: <urn:c2s#> .
    p:name a s223:Function ;
      s223:hasInput p:f_uOpeMod, p:f_VOccMin_flow ;
      s223:hasOutput p:f_VActCooMax_flow, p:f_VActHeaMax_flow, p:f_VActMin_flow ;
      c2s:targetEquipment p:vav .
  optional: ["vav"]
  dependencies:
    - template: f_uOpeMod
      args: {"name": "f_uOpeMod"}
    - template: f_VOccMin_flow
      args: {"name": "f_VOccMin_flow"}
    - template: f_VActCooMax_flow
      args: {"name": "f_VActCooMax_flow"}
    - template: f_VActHeaMax_flow
      args: {"name": "f_VActHeaMax_flow"}
    - template: f_VActMin_flow
      args: {"name": "f_VActMin_flow"}
    - template: vav-cooling-only
      args: {"name": "vav"}

# This is an input. It is of type functionInput and uses a point with the specified shape. 
f_uOpeMod:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:FunctionInput ;
      s223:uses p:uOpeMod .
  optional: ["uOpeMod"]
  dependencies:
    - template: uOpeMod
      args: {"name": "uOpeMod"}
f_VOccMin_flow:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:FunctionInput ;
      s223:uses p:VOccMin_flow .
  optional: ["VOccMin_flow"]
  dependencies:
    - template: VOccMin_flow
      args: {"name": "VOccMin_flow"}

f_VActHeaMax_flow:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:FunctionOutput ;
      s223:uses p:VActHeaMax_flow .
  optional: ["VActHeaMax_flow"]
  dependencies:
    - template: VActHeaMax_flow
      args: {"name": "VActHeaMax_flow"}

f_VActCooMax_flow:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:FunctionOutput ;
      s223:uses p:VActCooMax_flow .
  optional: ["VActCooMax_flow"]
  dependencies:
    - template: VActCooMax_flow
      args: {"name": "VActCooMax_flow"}

f_VActMin_flow:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:FunctionOutput ;
      s223:uses p:VActMin_flow .
  optional: ["VActMin_flow"]
  dependencies:
    - template: VActMin_flow
      args: {"name": "VActMin_flow"}

# This is a building data point. It is defined using 223 and can optionaly be a property of a vav.
# This will be used to create a SHACL shape that can be used to validate uOpeMod points or label them in a model.
uOpeMod:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:EnumeratedObservableProperty ;
      s223:hasAspect s223:Aspect-OperatingMode .
    p:vav s223:hasProperty p:name .
  optional: ["vav"]
  dependencies: 
    - template: vav-cooling-only
      args: {"name": "vav"}

VOccMin_flow:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:QuantifiableProperty ;
      s223:hasAspect s223:Occupancy-Occupied, s223:Aspect-LowLimit .
    p:vav s223:hasProperty p:name .
  optional: ["vav"]
  dependencies: 
    - template: vav-cooling-only
      args: {"name": "vav"}

VActCooMax_flow:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:QuantifiableActuatableProperty ;
      s223:hasAspect s223:Aspect-HighLimit .
    p:vav s223:hasProperty p:name .
  optional: ["vav"]
  dependencies: 
    - template: vav-cooling-only
      args: {"name": "vav"}

VActMin_flow:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:QuantifiableActuatableProperty ;
      s223:hasAspect s223:Aspect-LowLimit .
    p:vav s223:hasProperty p:name .
  optional: ["vav"]
  dependencies: 
    - template: vav-cooling-only
      args: {"name": "vav"}

VActHeaMax_flow:
# I don't know what this means, is it if the zone is in heating mode? 
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:QuantifiableActuatableProperty ;
      s223:hasAspect s223:Aspect-LowLimit, s223:Role-Heating .
    p:vav s223:hasProperty p:name .
  optional: ["vav"]
  dependencies: 
    - template: vav-cooling-only
      args: {"name": "vav"}

# also represent the parameter? 
VCooMax_flow:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:QuantifiableProperty ;
      s223:hasAspect s223:Aspect-Nominal, s223:Aspect-HighLimit .
    p:vav s223:hasProperty p:name .
  optional: ["vav"]
  dependencies: 
    - template: vav-cooling-only
      args: {"name": "vav"}
vav-cooling-only:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:SingleDuctTerminal ;
      s223:contains p:damper .
  dependencies: 
    - template: damper
      args: {"name": "damper"}

damper:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    p:name a s223:Damper .


