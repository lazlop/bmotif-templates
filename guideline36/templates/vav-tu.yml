


vav-cooling-only:
  body: >
    @prefix P: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    @prefix g36: <http://data.ashrae.org/standard223/1.0/extensions/g36#> .
    P:name a s223:SingleDuctTerminal, g36:VAV;
      s223:contains P:damper ;
      s223:cnx P:in, P:out .
    P:out s223:hasProperty P:discharge-air-flow, P:discharge-air-flow-setpoint .

    P:discharge-air-flow s223:hasAspect s223:Role-Discharge.

    P:damper-command a s223:QuantifiableActuatableProperty .

    P:discharge-air-flow-sensor a s223:Sensor .

    P:damper-actuator a s223:Actuator .

    P:duct-before-damper a s223:Duct .
    P:duct-after-damper a s223:Duct .
    
    P:damper-in s223:mapsTo P:in .
    P:damper-out s223:mapsTo P:out .

    P:in s223:cnx P:in-connection . 
    P:out s223:cnx P:out-connection . 

  optional: ["discharge-air-flow-setpoint"]

  dependencies:
    - template: damper
      args: {"name": "damper", "in-connection": "duct-before-damper", "out-connection": "duct-after-damper", "command": "damper-command", "in": "damper-in", "out": "damper-out"}
    - template: air-outlet-cp
      args: {"name": "out", "connection": "out-connection"}
    - template: air-inlet-cp
      args: {"name": "in", "connection": "in-connection"}
    - template: air-flow
      args: {"name": "discharge-air-flow"}
    - template: sensor
      args: {"name": "discharge-air-flow-sensor", "property": "discharge-air-flow", "where": "out"}
    - template: actuator
      args: {"name": "damper-actuator", "property": "damper-command", "where": "damper"}
    
    - template: air-flow-setpoint
      args: {"name": "discharge-air-flow-setpoint"}


vav-reheat:
  body: >
    @prefix P: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    @prefix g36: <http://data.ashrae.org/standard223/1.0/extensions/g36#> .
    P:name a s223:SingleDuctTerminal, g36:VAVWithReheat ;
      s223:contains P:reheat-coil, P:damper, P:reheat-coil-valve ;
      s223:cnx P:air-in, P:air-out, P:hot-water-in, P:hot-water-out .

    P:air-out s223:hasProperty P:discharge-air-temp, P:discharge-air-temp-setpoint, P:discharge-air-flow, P:discharge-air-flow-setpoint .

    P:discharge-air-flow s223:hasAspect s223:Role-Discharge .
    P:discharge-air-temp s223:hasAspect s223:Role-Discharge .

    P:damper-command a s223:QuantifiableActuatableProperty .

    P:air-in s223:cnx P:air-in-connection .
    P:air-out s223:cnx P:air-out-connection .
    P:hot-water-in s223:cnx P:hot-water-in-connection .
    P:hot-water-out s223:cnx P:hot-water-out-connection .

    P:discharge-air-flow-sensor a s223:Sensor .
    P:discharge-air-temp-sensor a s223:Sensor .

    P:damper-actuator a s223:Actuator .

    P:air-in-connection a s223:Duct .
    P:duct-after-damper a s223:Duct .
    P:air-out-connection a s223:Duct .

    P:hot-water-in-connection a s223:Pipe . 
    P:pipe-hot-water-return-before-valve a s223:Pipe .
    P:hot-water-out-connection a s223:Pipe .

    P:damper-in s223:mapsTo P:air-in .
    P:reheat-coil-air-out s223:mapsTo P:air-out .
    P:reheat-coil-water-in s223:mapsTo P:hot-water-in .
    P:reheat-coil-valve-out s223:mapsTo P:hot-water-out .
    P:damper-out a s223:OutletConnectionPoint .



  optional: ["discharge-air-flow-setpoint", "discharge-air-temp-setpoint"]


  dependencies:
    - template: hw-valve
      args: {"name": "reheat-coil-valve", "in-connection": "pipe-hot-water-return-before-valve", "out-connection": "hot-water-out-connection", "out": "reheat-coil-valve-out"}
    - template: hot-water-coil
      args: {"name": "reheat-coil", "air-in-connection": "duct-after-damper", "air-out-connection": "air-out-connection", "water-in-connection": "hot-water-in-connection", "water-out-connection": "pipe-hot-water-return-before-valve", "air-out": "reheat-coil-air-out", "water-in": "reheat-coil-water-in"}
    - template: damper
      args: {"name": "damper", "in-connection": "air-in-connection", "out-connection": "duct-after-damper", "command": "damper-command", "in": "damper-in", "out": "damper-out"}

    - template: air-outlet-cp
      args: {"name": "air-out", "connection": "air-out-connection"}
    - template: air-inlet-cp
      args: {"name": "air-in", "connection": "air-in-connection"}
    - template: water-outlet-cp
      args: {"name": "hot-water-out", "connection": "hot-water-out-connection"}
    - template: water-inlet-cp
      args: {"name": "hot-water-in", "connection": "hot-water-in-connection"}

    - template: air-temperature
      args: {"name": "discharge-air-temp"}
    - template: air-flow
      args: {"name": "discharge-air-flow"}

    - template: sensor
      args: {"name": "discharge-air-temp-sensor", "property": "discharge-air-temp", "where": "air-out"}
    - template: sensor
      args: {"name": "discharge-air-flow-sensor", "property": "discharge-air-flow", "where": "air-in"}

    - template: actuator
      args: {"name": "damper-actuator", "property": "damper-command", "where": "damper"}
    - template: air-flow-setpoint
      args: {"name": "discharge-air-flow-setpoint"}
    - template: temp-setpoint
      args: {"name": "discharge-air-temp-setpoint"}