
single-zone-air-handling-unit:
  body: >
    @prefix P: <urn:___param___#> .
    @prefix s223: <http://data.ashrae.org/standard223#> .
    @prefix g36: <http://data.ashrae.org/standard223/1.0/extensions/g36#> .
    P:name a s223:AirHandlingUnit, g36:DualFanDualDuctHeatingAirHandlingUnit;
      s223:contains P:filter, P:supply-fan, P:return-fan, P:heating-coil, P:heating-coil-valve, P:cooling-coil, P:cooling-coil-valve, P:return-air-damper, P:exhaust-air-damper, P:outside-air-damper, P:return-exhaust-junction, P:outside-supply-junction;
      s223:cnx P:return-air-in, P:supply-air-out, P:outside-air-in, P:exhaust-air-out,  P:hot-water-in, P:hot-water-out, P:chilled-water-in, P:chilled-water-out .

    P:return-air-in s223:hasProperty P:return-air-temp .
    P:supply-air-out s223:hasProperty P:supply-air-temp.
    P:filter-in s223:hasProperty P:mixed-air-temp.
    P:return-air-temp s223:hasAspect s223:Role-Return.
    P:supply-air-temp s223:hasAspect s223:Role-Supply.


    P:return-air-temp-sensor a s223:Sensor .
    P:supply-air-temp-sensor a s223:Sensor .
    P:mixed-air-temp-sensor a s223:Sensor .

    P:duct-return-air a s223:Duct .
    P:duct-outside-air a s223:Duct .
    P:duct-exhaust-air a s223:Duct .
    P:duct-supply-air a s223:Duct .
    P:duct-after-return-fan a s223:Duct .
    P:duct-before-exhaust-air-damper a s223:Duct .
    P:duct-before-return-air-damper a s223:Duct .
    P:duct-after-return-air-damper a s223:Duct .
    P:duct-after-outside-air-damper a s223:Duct .
    P:duct-before-filter a s223:Duct .
    P:duct-after-filter a s223:Duct .
    P:duct-after-heating-coil a s223:Duct .
    P:duct-after-cooling-coil a s223:Duct .


    P:pipe-hot-water-supply a s223:Pipe . 
    P:pipe-hot-water-return-before-valve a s223:Pipe .
    P:pipe-hot-water-return-after-valve a s223:Pipe .
    P:pipe-chilled-water-supply a s223:Pipe . 
    P:pipe-chilled-water-return-before-valve a s223:Pipe .
    P:pipe-chilled-water-return-after-valve a s223:Pipe .



    P:return-fan-in s223:mapsTo P:return-air-in .
    P:supply-fan-out s223:mapsTo P:supply-air-out .
    P:outside-air-damper-in s223:mapsTo P:outside-air-in .
    P:exhaust-air-damper-out s223:mapsTo P:exhaust-air-out .


    P:heating-coil-water-in s223:mapsTo P:hot-water-in .
    P:heating-coil-valve-out s223:mapsTo P:hot-water-out .

    P:cooling-coil-water-in s223:mapsTo P:chilled-water-in .
    P:cooling-coil-valve-out s223:mapsTo P:chilled-water-out .

  dependencies:

    - template: air-outlet-cp
      args: {"name": "supply-air-out", "connection": "duct-supply-air"}
    - template: air-inlet-cp
      args: {"name": "return-air-in", "connection": "duct-return-air"}
    - template: air-outlet-cp
      args: {"name": "exhaust-air-out", "connection": "duct-exhaust-air"}
    - template: air-inlet-cp
      args: {"name": "outside-air-in", "connection": "duct-outside-air"}

    - template: water-outlet-cp
      args: {"name": "hot-water-out", "connection": "pipe-hot-water-return-after-valve"}
    - template: water-inlet-cp
      args: {"name": "hot-water-in", "connection": "pipe-hot-water-supply"}

    - template: water-outlet-cp
      args: {"name": "chilled-water-out", "connection": "pipe-chilled-water-return-after-valve"}
    - template: water-inlet-cp
      args: {"name": "chilled-water-in", "connection": "pipe-chilled-water-supply"}

    - template: sensor
      args: {"name": "supply-air-temp-sensor", "property": "supply-air-temp", "where": "supply-air-out"}
    - template: sensor
      args: {"name": "return-air-temp-sensor", "property": "return-air-temp", "where": "return-air-in"}
    - template: sensor
      args: {"name": "mixed-air-temp-sensor", "property": "mixed-air-temp", "where": "filter-in"}
      
    - template: air-temperature
      args: {"name": "supply-air-temp"}
    - template: air-temperature
      args: {"name": "return-air-temp"}
    - template: air-temperature
      args: {"name": "mixed-air-temp"}

    - template: variable-fan
      args: {"name": "supply-fan", "in-connection": "duct-after-cooling-coil", "out-connection": "duct-supply-air"}
    - template: variable-fan
      args: {"name": "return-fan", "in-connection": "duct-return-air", "out-connection": "duct-after-return-fan"}

    - template: hot-water-coil
      args: {"name": "heating-coil", "air-in-connection": "duct-after-filter", "air-out-connection": "duct-after-heating-coil", "water-in-connection": "pipe-hot-water-supply", "water-out-connection": "pipe-hot-water-return-before-valve"}

    - template: hw-valve
      args: {"name": "heating-coil-valve", "in-connection": "pipe-hot-water-return-before-valve", "out-connection": "pipe-hot-water-return-after-valve"}

    - template: chilled-water-coil
      args: {"name": "cooling-coil", "air-in-connection": "duct-after-heating-coil", "air-out-connection": "duct-after-cooling-coil", "water-in-connection": "pipe-chilled-water-supply", "water-out-connection": "pipe-chilled-water-return-before-valve"}

    - template: chw-valve
      args: {"name": "cooling-coil-valve", "in-connection": "pipe-chilled-water-return-before-valve", "out-connection": "pipe-chilled-water-return-after-valve"}

    - template: filter
      args: {"name": "filter", "in-connection": "duct-before-filter", "out-connection": "duct-after-filter"}


    - template: junction-air-diverge-directional
      args: {"name": "return-exhaust-junction", "in-connection": "duct-after-return-fan", "out-1-connection": "duct-before-exhaust-air-damper", "out-2-connection": "duct-before-return-air-damper"}

    - template: junction-air-converge-directional
      args: {"name": "outside-supply-junction", "in-1-connection": "duct-after-outside-air-damper", "in-2-connection": "duct-after-return-air-damper", "out-connection": "duct-before-filter"}


    - template: damper
      args: {"name": "return-air-damper", "in-connection": "duct-before-return-air-damper", "out-connection": "duct-after-return-air-damper"}
    - template: damper
      args: {"name": "outside-air-damper", "in-connection": "duct-outside-air", "out-connection": "duct-after-outside-air-damper"}


    - template: damper
      args: {"name": "exhaust-air-damper", "in-connection": "duct-before-exhaust-air-damper", "out-connection": "duct-exhaust-air"}

